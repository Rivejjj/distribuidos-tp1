version: '3.9'
name: tp1
services:
  category_filter:
    container_name: category_filter
    image: book-filter:latest
    entrypoint: python3 /main.py
    environment:
      - PYTHONUNBUFFERED=1
      - LOGGING_LEVEL=DEBUG
      - PUBLISHED_YEAR_RANGE=Computers
    networks:
      - testing_net

  decades_accumulator:
    container_name: decades_accumulator
    image: decades_accumulator:latest
    entrypoint: python3 /main.py
    environment:
      - PYTHONUNBUFFERED=1
      - LOGGING_LEVEL=DEBUG
      - CATEGORY=Computers
    networks:
      - testing_net

  data_receiver:
    container_name: data_receiver
    image: data-receiver:latest
    entrypoint: python3 /main.py
    environment:
      - PYTHONUNBUFFERED=1
      - LOGGING_LEVEL=DEBUG
      - CATEGORY=Computers
    networks:
      - testing_net

  published_year_filter:
    container_name: published_year_filter
    image: book-filter:latest
    entrypoint: python3 /main.py
    environment:
      - PYTHONUNBUFFERED=1
      - LOGGING_LEVEL=DEBUG
      - PUBLISHED_YEAR_RANGE=2000-2023
    networks:
      - testing_net

  title_contains_filter:
    container_name: title_contains_filter
    image: book-filter:latest
    entrypoint: python3 /main.py
    environment:
      - PYTHONUNBUFFERED=1
      - LOGGING_LEVEL=DEBUG
      - TITLE_CONTAINS=distributed
    networks:
      - testing_net
networks:
  testing_net:
    ipam:
      driver: default
      config:
        - subnet: 172.25.125.0/24
